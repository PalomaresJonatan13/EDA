% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/select_pca.R
\name{select_pca}
\alias{select_pca}
\title{Select Principal Components Based on Eigenvalue or Variance Threshold}
\usage{
select_pca(df, vars = NULL, eigenvalues = FALSE, percentage = 80)
}
\arguments{
\item{df}{A data frame or tibble containing the data.}

\item{vars}{Optional unquoted tidy-select specification of numeric columns
to include in the PCA.  If \code{NULL} (default), all numeric columns are used.}

\item{eigenvalues}{Logical; if \code{TRUE}, select all components whose
eigenvalues ≥ 1 (Kaiser criterion).  If \code{FALSE} (default), select the
smallest number of components whose cumulative explained variance
meets or exceeds \code{percentage}.}

\item{percentage}{Numeric; target cumulative percentage of explained
variance (0–100) when \code{eigenvalues = FALSE}.  Default is 80.}
}
\value{
A list with elements:
\describe{
\item{method}{A string indicating the selection method:
\code{"eigenvalues"} or \code{"\% of explained variance >= {percentage}"}.}
\item{n_components}{The number of principal components retained.}
\item{explained_variance}{The cumulative percentage of variance explained
by the retained components.}
\item{scree_plot}{A ggplot object (from \code{factoextra::fviz_eig()})
showing the eigenvalues.}
\item{selected_components}{The result of \code{FactoMineR::PCA()} rerun with
\code{ncp = n_components}, containing coordinates, loadings, etc.}
}
}
\description{
\code{select_pca()} performs a preliminary PCA on the numeric columns of a data
frame, selects principal components according to either the Kaiser criterion
(eigenvalues ≥ 1) or a cumulative variance threshold, and then reruns PCA
with only the selected number of components.  It returns both summary
information and a scree plot.
}
\details{
\itemize{
\item A first PCA is run with \code{ncp = 1} to extract all eigenvalues and variances.
\item If \code{eigenvalues = TRUE}, components with eigenvalue ≥ 1 are kept.
\item Otherwise, the cumulative variance vector is used to find the minimum
number of components whose sum of percentages ≥ \code{percentage}.
\item Finally, PCA is rerun with \code{ncp} equal to the number of retained components,
and a scree plot is generated.
}
}
